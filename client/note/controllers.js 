'use strict';
 
angular
 .module('app')
 .controller('NoteCtrl', ['$scope', '$state', 'Note', function($scope,
     $state, Note) {
   $scope.notes = [];
   function getNotes() {
     Note
       .find()
       .$promise
       .then(function(results) {
         $scope.notes = results;
       });
   }
   getNotes();
 
   $scope.addNote = function() {
     Note
       .create($scope.newNote)
       .$promise
       .then(function(note) {
         $scope.newNote = '';
         $scope.noteForm.content.$setPristine();
         $('.focus').focus(); //JQuery hack for refocusing text input
         getNotes();
       });
   };
 
   $scope.removeNote = function(item) {
     Note
       .deleteById(item)
       .$promise
       .then(function() {
         getNotes();
       });
   };
 }]);